import React, { useState } from â€˜reactâ€™;
import { Star, Apple, Baby, Cherry, Candy, Gift, Heart, Moon, Sun, Flower, Trophy, Diamond, Crown, Rocket, Music, Camera, Palette, Gamepad, Coffee, Book, Umbrella, Watch, Zap, Cloud } from â€˜lucide-reactâ€™;

const TahminOyunu = () => {
const [oyunFazi, setOyunFazi] = useState(â€˜oyuncu1-hazirlikâ€™);
// Fazlar: oyuncu1-hazirlik, oyuncu2-hazirlik, oyun-baslangic, oyun-devam, oyun-bitti
const [aktifOyuncu, setAktifOyuncu] = useState(1);
const [oyuncu1Hedefler, setOyuncu1Hedefler] = useState([]);
const [oyuncu2Hedefler, setOyuncu2Hedefler] = useState([]);
const [oyuncu1Tahminler, setOyuncu1Tahminler] = useState([]);
const [oyuncu2Tahminler, setOyuncu2Tahminler] = useState([]);
const [oyuncu1Puan, setOyuncu1Puan] = useState(0);
const [oyuncu2Puan, setOyuncu2Puan] = useState(0);
const [hamle, setHamle] = useState(0);
const [animasyon, setAnimasyon] = useState(null);

const set1Objeler = [
{ id: 1, icon: Star, isim: â€˜YÄ±ldÄ±zâ€™, renk: â€˜#FFD700â€™ },
{ id: 2, icon: Apple, isim: â€˜Elmaâ€™, renk: â€˜#FF4444â€™ },
{ id: 3, icon: Baby, isim: â€˜Bebekâ€™, renk: â€˜#FFB6C1â€™ },
{ id: 4, icon: Cherry, isim: â€˜Kirazâ€™, renk: â€˜#DC143Câ€™ },
{ id: 5, icon: Candy, isim: â€˜Åekerâ€™, renk: â€˜#FF69B4â€™ },
{ id: 6, icon: Gift, isim: â€˜Hediyeâ€™, renk: â€˜#9370DBâ€™ },
{ id: 7, icon: Heart, isim: â€˜Kalpâ€™, renk: â€˜#FF1493â€™ },
{ id: 8, icon: Moon, isim: â€˜Ayâ€™, renk: â€˜#F0E68Câ€™ },
{ id: 9, icon: Sun, isim: â€˜GÃ¼neÅŸâ€™, renk: â€˜#FFA500â€™ },
{ id: 10, icon: Flower, isim: â€˜Ã‡iÃ§ekâ€™, renk: â€˜#FF6B9Dâ€™ },
{ id: 11, icon: Trophy, isim: â€˜Kupaâ€™, renk: â€˜#DAA520â€™ },
{ id: 12, icon: Diamond, isim: â€˜Elmasâ€™, renk: â€˜#00CED1â€™ }
];

const set2Objeler = [
{ id: 13, icon: Crown, isim: â€˜TaÃ§â€™, renk: â€˜#FFD700â€™ },
{ id: 14, icon: Rocket, isim: â€˜Roketâ€™, renk: â€˜#FF6347â€™ },
{ id: 15, icon: Music, isim: â€˜MÃ¼zikâ€™, renk: â€˜#9370DBâ€™ },
{ id: 16, icon: Camera, isim: â€˜Kameraâ€™, renk: â€˜#4169E1â€™ },
{ id: 17, icon: Palette, isim: â€˜Paletâ€™, renk: â€˜#FF69B4â€™ },
{ id: 18, icon: Gamepad, isim: â€˜Oyunâ€™, renk: â€˜#32CD32â€™ },
{ id: 19, icon: Coffee, isim: â€˜Kahveâ€™, renk: â€˜#8B4513â€™ },
{ id: 20, icon: Book, isim: â€˜Kitapâ€™, renk: â€˜#4682B4â€™ },
{ id: 21, icon: Umbrella, isim: â€˜Åemsiyeâ€™, renk: â€˜#FF1493â€™ },
{ id: 22, icon: Watch, isim: â€˜Saatâ€™, renk: â€˜#C0C0C0â€™ },
{ id: 23, icon: Zap, isim: â€˜ÅimÅŸekâ€™, renk: â€˜#FFD700â€™ },
{ id: 24, icon: Cloud, isim: â€˜Bulutâ€™, renk: â€˜#87CEEBâ€™ }
];

const hedefSec = (objeId) => {
if (oyunFazi === â€˜oyuncu1-hazirlikâ€™ && oyuncu1Hedefler.length < 3 && !oyuncu1Hedefler.includes(objeId)) {
setOyuncu1Hedefler([â€¦oyuncu1Hedefler, objeId]);
} else if (oyunFazi === â€˜oyuncu2-hazirlikâ€™ && oyuncu2Hedefler.length < 3 && !oyuncu2Hedefler.includes(objeId)) {
setOyuncu2Hedefler([â€¦oyuncu2Hedefler, objeId]);
}
};

const oyuncuHazirla = () => {
if (oyunFazi === â€˜oyuncu1-hazirlikâ€™ && oyuncu1Hedefler.length === 3) {
setOyunFazi(â€˜oyuncu2-hazirlikâ€™);
}
};

const oyunuBaslat = () => {
if (oyuncu2Hedefler.length === 3) {
setOyunFazi(â€˜oyun-baslangicâ€™);
}
};

const oyunaBasla = () => {
setOyunFazi(â€˜oyun-devamâ€™);
setAktifOyuncu(1);
setHamle(1);
};

const kartSec = (objeId) => {
if (oyunFazi !== â€˜oyun-devamâ€™) return;

```
if (aktifOyuncu === 1) {
  if (oyuncu1Tahminler.includes(objeId)) return;
  
  const yeniTahminler = [...oyuncu1Tahminler, objeId];
  setOyuncu1Tahminler(yeniTahminler);

  if (oyuncu2Hedefler.includes(objeId)) {
    setOyuncu1Puan(oyuncu1Puan + 1);
    setAnimasyon({ tip: 'basarili', objeId, oyuncu: 1 });
    setTimeout(() => setAnimasyon(null), 1500);
  } else {
    setAnimasyon({ tip: 'yanlis', objeId, oyuncu: 1 });
    setTimeout(() => setAnimasyon(null), 1000);
  }

  setTimeout(() => {
    if (yeniTahminler.length < 3) {
      // AynÄ± oyuncu devam ediyor
    } else {
      if (hamle < 3) {
        setAktifOyuncu(2);
      } else {
        setOyunFazi('oyun-bitti');
      }
    }
  }, 1200);
} else {
  if (oyuncu2Tahminler.includes(objeId)) return;
  
  const yeniTahminler = [...oyuncu2Tahminler, objeId];
  setOyuncu2Tahminler(yeniTahminler);

  if (oyuncu1Hedefler.includes(objeId)) {
    setOyuncu2Puan(oyuncu2Puan + 1);
    setAnimasyon({ tip: 'basarili', objeId, oyuncu: 2 });
    setTimeout(() => setAnimasyon(null), 1500);
  } else {
    setAnimasyon({ tip: 'yanlis', objeId, oyuncu: 2 });
    setTimeout(() => setAnimasyon(null), 1000);
  }

  setTimeout(() => {
    if (yeniTahminler.length < 3) {
      // AynÄ± oyuncu devam ediyor
    } else {
      setHamle(hamle + 1);
      setAktifOyuncu(1);
      setOyuncu1Tahminler([]);
      setOyuncu2Tahminler([]);
    }
  }, 1200);
}
```

};

const yenidenBaslat = () => {
setOyunFazi(â€˜oyuncu1-hazirlikâ€™);
setAktifOyuncu(1);
setOyuncu1Hedefler([]);
setOyuncu2Hedefler([]);
setOyuncu1Tahminler([]);
setOyuncu2Tahminler([]);
setOyuncu1Puan(0);
setOyuncu2Puan(0);
setHamle(0);
setAnimasyon(null);
};

const ObjeKart = ({ obje, tiklama, secili, hedef, tahmin, gizli }) => {
const Icon = obje.icon;
const animasyonAktif = animasyon?.objeId === obje.id;
const basarili = animasyonAktif && animasyon?.tip === â€˜basariliâ€™;
const yanlis = animasyonAktif && animasyon?.tip === â€˜yanlisâ€™;

```
return (
  <div
    onClick={tiklama}
    className={`relative w-24 h-24 rounded-xl flex flex-col items-center justify-center cursor-pointer transition-all duration-300 shadow-lg ${
      basarili ? 'bg-green-500 scale-110 animate-pulse' :
      yanlis ? 'bg-red-500 scale-95' :
      secili ? 'bg-gradient-to-br from-blue-400 to-blue-600 scale-105 shadow-xl' :
      hedef ? 'bg-gradient-to-br from-purple-400 to-purple-600 scale-105 shadow-xl' :
      tahmin ? 'bg-gray-400' :
      'bg-gradient-to-br from-gray-100 to-gray-200 hover:scale-105 hover:shadow-2xl'
    } border-4 ${secili || hedef ? 'border-yellow-300' : 'border-white'}`}
  >
    {basarili && (
      <div className="absolute inset-0 flex items-center justify-center z-10">
        <div className="text-5xl animate-bounce">âœ¨</div>
      </div>
    )}
    {yanlis && (
      <div className="absolute inset-0 flex items-center justify-center z-10">
        <div className="text-4xl">âŒ</div>
      </div>
    )}
    {!gizli && (
      <Icon 
        size={48} 
        style={{ color: basarili || yanlis ? '#fff' : secili || hedef ? '#fff' : obje.renk }}
        strokeWidth={2.5}
      />
    )}
    {!gizli && (
      <span className={`text-xs mt-1 font-semibold ${secili || hedef ? 'text-white' : 'text-gray-700'}`}>
        {obje.isim}
      </span>
    )}
    {gizli && (
      <div className="text-5xl">ğŸ´</div>
    )}
  </div>
);
```

};

return (
<div className="min-h-screen bg-gradient-to-br from-indigo-600 via-purple-600 to-pink-600 p-6">
<div className="max-w-7xl mx-auto">
{/* BaÅŸlÄ±k ve Skor */}
<div className="bg-white rounded-3xl shadow-2xl p-6 mb-6">
<h1 className="text-5xl font-black text-center bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-4">
âš¡ SÃœPER TAHMÄ°N YARIÅMASI âš¡
</h1>

```
      {(oyunFazi === 'oyun-devam' || oyunFazi === 'oyun-bitti') && (
        <div className="flex justify-around items-center mt-6">
          <div className={`text-center p-4 rounded-xl transition-all ${aktifOyuncu === 1 && oyunFazi === 'oyun-devam' ? 'bg-blue-100 scale-110' : 'bg-gray-100'}`}>
            <div className="text-4xl mb-2">ğŸ‘¤</div>
            <div className="text-xl font-bold text-blue-600">OYUNCU 1</div>
            <div className="text-4xl font-black text-blue-600 mt-2">{oyuncu1Puan}</div>
          </div>
          
          <div className="text-center">
            <div className="text-2xl font-bold text-gray-600">ROUND {hamle}/3</div>
          </div>
          
          <div className={`text-center p-4 rounded-xl transition-all ${aktifOyuncu === 2 && oyunFazi === 'oyun-devam' ? 'bg-green-100 scale-110' : 'bg-gray-100'}`}>
            <div className="text-4xl mb-2">ğŸ‘¤</div>
            <div className="text-xl font-bold text-green-600">OYUNCU 2</div>
            <div className="text-4xl font-black text-green-600 mt-2">{oyuncu2Puan}</div>
          </div>
        </div>
      )}
    </div>

    {/* Oyuncu 1 HazÄ±rlÄ±k */}
    {oyunFazi === 'oyuncu1-hazirlik' && (
      <div className="bg-white rounded-3xl shadow-2xl p-8">
        <div className="text-center mb-6">
          <h2 className="text-3xl font-bold text-blue-600 mb-2">ğŸ‘¤ OYUNCU 1 HAZIRLIK</h2>
          <p className="text-xl text-gray-700">3 hedef obje seÃ§in ({oyuncu1Hedefler.length}/3)</p>
          <p className="text-red-500 font-semibold mt-2">âš ï¸ Oyuncu 2 ekrana bakmasÄ±n!</p>
        </div>
        
        <div className="grid grid-cols-6 gap-4 mb-6">
          {set1Objeler.map((obje) => (
            <ObjeKart
              key={obje.id}
              obje={obje}
              tiklama={() => hedefSec(obje.id)}
              secili={oyuncu1Hedefler.includes(obje.id)}
            />
          ))}
        </div>

        {oyuncu1Hedefler.length === 3 && (
          <div className="text-center">
            <button
              onClick={oyuncuHazirla}
              className="px-12 py-4 bg-gradient-to-r from-blue-500 to-blue-700 text-white rounded-2xl font-bold text-2xl hover:from-blue-600 hover:to-blue-800 transition-all shadow-xl hover:scale-105"
            >
              Oyuncu 2'ye GeÃ§ â†’
            </button>
          </div>
        )}
      </div>
    )}

    {/* Oyuncu 2 HazÄ±rlÄ±k */}
    {oyunFazi === 'oyuncu2-hazirlik' && (
      <div className="bg-white rounded-3xl shadow-2xl p-8">
        <div className="text-center mb-6">
          <h2 className="text-3xl font-bold text-green-600 mb-2">ğŸ‘¤ OYUNCU 2 HAZIRLIK</h2>
          <p className="text-xl text-gray-700">3 hedef obje seÃ§in ({oyuncu2Hedefler.length}/3)</p>
          <p className="text-red-500 font-semibold mt-2">âš ï¸ Oyuncu 1 ekrana bakmasÄ±n!</p>
        </div>
        
        <div className="grid grid-cols-6 gap-4 mb-6">
          {set2Objeler.map((obje) => (
            <ObjeKart
              key={obje.id}
              obje={obje}
              tiklama={() => hedefSec(obje.id)}
              secili={oyuncu2Hedefler.includes(obje.id)}
            />
          ))}
        </div>

        {oyuncu2Hedefler.length === 3 && (
          <div className="text-center">
            <button
              onClick={oyunuBaslat}
              className="px-12 py-4 bg-gradient-to-r from-green-500 to-green-700 text-white rounded-2xl font-bold text-2xl hover:from-green-600 hover:to-green-800 transition-all shadow-xl hover:scale-105"
            >
              HazÄ±r! â†’
            </button>
          </div>
        )}
      </div>
    )}

    {/* Oyun BaÅŸlangÄ±Ã§ */}
    {oyunFazi === 'oyun-baslangic' && (
      <div className="bg-white rounded-3xl shadow-2xl p-12 text-center">
        <div className="text-8xl mb-6 animate-bounce">ğŸ®</div>
        <h2 className="text-5xl font-black text-purple-600 mb-6">OYUN BAÅLIYOR!</h2>
        <p className="text-2xl text-gray-700 mb-8">Her oyuncu sÄ±rayla rakibinin hedeflerini tahmin edecek</p>
        <button
          onClick={oyunaBasla}
          className="px-16 py-6 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-2xl font-black text-3xl hover:from-purple-600 hover:to-pink-600 transition-all shadow-2xl hover:scale-110 animate-pulse"
        >
          BAÅLA! ğŸš€
        </button>
      </div>
    )}

    {/* Oyun Devam */}
    {oyunFazi === 'oyun-devam' && (
      <div className="bg-white rounded-3xl shadow-2xl p-8">
        <div className="text-center mb-6">
          <h2 className={`text-3xl font-bold mb-2 ${aktifOyuncu === 1 ? 'text-blue-600' : 'text-green-600'}`}>
            {aktifOyuncu === 1 ? 'ğŸ‘¤ OYUNCU 1 SIRA SÄ°ZDE!' : 'ğŸ‘¤ OYUNCU 2 SIRA SÄ°ZDE!'}
          </h2>
          <p className="text-xl text-gray-700">
            Rakibinizin hedeflerini tahmin edin ({aktifOyuncu === 1 ? oyuncu1Tahminler.length : oyuncu2Tahminler.length}/3)
          </p>
        </div>
        
        <div className="grid grid-cols-6 gap-4">
          {(aktifOyuncu === 1 ? set2Objeler : set1Objeler).map((obje) => (
            <ObjeKart
              key={obje.id}
              obje={obje}
              tiklama={() => kartSec(obje.id)}
              tahmin={aktifOyuncu === 1 ? oyuncu1Tahminler.includes(obje.id) : oyuncu2Tahminler.includes(obje.id)}
            />
          ))}
        </div>
      </div>
    )}

    {/* Oyun Bitti */}
    {oyunFazi === 'oyun-bitti' && (
      <div className="bg-white rounded-3xl shadow-2xl p-12 text-center">
        <div className="text-8xl mb-6">ğŸ†</div>
        <h2 className="text-5xl font-black text-purple-600 mb-6">
          {oyuncu1Puan > oyuncu2Puan ? 'OYUNCU 1 KAZANDI!' : 
           oyuncu2Puan > oyuncu1Puan ? 'OYUNCU 2 KAZANDI!' : 
           'BERABERE!'}
        </h2>
        <div className="text-3xl font-bold text-gray-700 mb-8">
          {oyuncu1Puan} - {oyuncu2Puan}
        </div>
        <button
          onClick={yenidenBaslat}
          className="px-12 py-4 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-2xl font-bold text-2xl hover:from-purple-600 hover:to-pink-600 transition-all shadow-xl hover:scale-105"
        >
          ğŸ”„ Yeniden Oyna
        </button>
      </div>
    )}
  </div>
</div>
```

);
};

export default TahminOyunu;
